<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-architecture/dependency-management" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.1">
<title data-rh="true">Dependency Management | React Native Developer Tools</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/rnx-kit/docs/architecture/dependency-management"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Dependency Management | React Native Developer Tools"><meta data-rh="true" name="description" content="dep-check was recently renamed to align-deps to avoid name clashes and"><meta data-rh="true" property="og:description" content="dep-check was recently renamed to align-deps to avoid name clashes and"><link data-rh="true" rel="icon" href="/rnx-kit/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/rnx-kit/docs/architecture/dependency-management"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/rnx-kit/docs/architecture/dependency-management" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/rnx-kit/docs/architecture/dependency-management" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://47BE8NTWGA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/rnx-kit/blog/rss.xml" title="React Native Developer Tools RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/rnx-kit/blog/atom.xml" title="React Native Developer Tools Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ZT44H2DNEQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-ZT44H2DNEQ",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="React Native Developer Tools" href="/rnx-kit/opensearch.xml"><link rel="stylesheet" href="/rnx-kit/assets/css/styles.202d92ea.css">
<script src="/rnx-kit/assets/js/runtime~main.fa719484.js" defer="defer"></script>
<script src="/rnx-kit/assets/js/main.1948d074.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/rnx-kit/"><div class="navbar__logo"><img src="/rnx-kit/img/react-logo.svg" alt="react native logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rnx-kit/img/react-logo.svg" alt="react native logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">rnx-kit</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/rnx-kit/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/rnx-kit/docs/tools/overview">Tools</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/rnx-kit/docs/architecture/overview">Architecture</a><a class="navbar__item navbar__link" href="/rnx-kit/docs/community">Community</a><a class="navbar__item navbar__link" href="/rnx-kit/docs/contributing">Contributing</a><a href="https://devblogs.microsoft.com/react-native/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/microsoft/rnx-kit/#readme" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link github-mark-24px" src="img/github-logo.svg" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/rnx-kit/docs/architecture/overview">Architecture</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/rnx-kit/docs/architecture/overview">Architecture Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/rnx-kit/docs/architecture/dependency-management">Dependency Management</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Dependency Management</h1>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p><code>dep-check</code> was recently renamed to <code>align-deps</code> to avoid name clashes and
general confusion. Unless noted otherwise, this document is still valid.</p><p>You can read more about the changes in this RFC:
<a href="https://github.com/microsoft/rnx-kit/blob/rfcs/text/0001-dep-check-v2.md" target="_blank" rel="noopener noreferrer"><code>dep-check</code> v2</a></p></div></div>
<p><a href="/rnx-kit/docs/tools/align-deps">dep-check</a> is a dependency manager and linter that aims to
bring alignment to all React Native developers who are working in any-size
repositories, from small self-contained repositories to big, enterprise
monorepos.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="terminology">Terminology<a href="#terminology" class="hash-link" aria-label="Direct link to Terminology" title="Direct link to Terminology">​</a></h2>
<ul>
<li><strong>experience</strong> — As opposed to apps that get shipped in e.g. App Store or Play
Store, experiences may be a single screen (or multiple) integrated into an
app. They are normally not shipped as standalone apps.</li>
<li><strong>monorepo</strong> — A single repository in which many projects live. These can
range from single-purpose libraries to experiences or full-fledged apps. For
instance, <a href="https://github.com/microsoft/rnx-kit" target="_blank" rel="noopener noreferrer">https://github.com/microsoft/rnx-kit</a> is a monorepo containing many
useful tools, including <code>dep-check</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="motivation">Motivation<a href="#motivation" class="hash-link" aria-label="Direct link to Motivation" title="Direct link to Motivation">​</a></h2>
<p>The design of <code>dep-check</code> is driven mainly by the following questions:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-which-packages-should-i-use">1. Which packages should I use?<a href="#1-which-packages-should-i-use" class="hash-link" aria-label="Direct link to 1. Which packages should I use?" title="Direct link to 1. Which packages should I use?">​</a></h3>
<p>There is currently no centralized place where developers can go to and get a
list of recommended modules, and which versions they should be using when
targeting a specific version of React Native. How do you know whether a module
is still maintained? Are the maintainers still around to review PRs? Is the
module being used by others?</p>
<p>Take <code>AsyncStorage</code> as an example. This is a module that used to ship with React
Native. It then got moved out to the React Native Community organization as
<code>@react-native-community/async-storage</code> as part of the Lean Core effort. It
later got ejected from React Native Community, and was renamed
<code>@react-native-async-storage/async-storage</code>. If you don&#x27;t know the full story of
what happened here, there is little chance you know that <code>AsyncStorage</code> from
core, <code>@react-native-community/async-storage</code>, and
<code>@react-native-async-storage/async-storage</code> are all the same module. Or that
<code>@react-native-community/netinfo</code> was a fork of <code>react-native-netinfo</code> that
later became the &quot;official&quot; one.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-how-do-i-align-all-of-my-code-on-the-same-set-of-packages-and-versions">2. How do I align all of my code on the same set of packages and versions?<a href="#2-how-do-i-align-all-of-my-code-on-the-same-set-of-packages-and-versions" class="hash-link" aria-label="Direct link to 2. How do I align all of my code on the same set of packages and versions?" title="Direct link to 2. How do I align all of my code on the same set of packages and versions?">​</a></h3>
<p>Ideally, all apps are always on the latest version of <code>react-native</code> and are
using a common set of well maintained community modules. Unfortunately, the
reality is that some apps are on a two year old version of <code>react-native</code> and
some modules that are no longer maintained, while others are on a somewhat
recent version of <code>react-native</code> but on an older version of WebView than what
others use. When you&#x27;re responsible for an experience that goes into many apps,
you may be forced to provide support for both scenarios (and others), and that&#x27;s
where most feel the pain. How can you make sure that your experiences&#x27;
dependencies play well with each other or even other experiences? The pain is
magnified in a monorepo with many developers as breakages can come from a single
package being out of sync with the others. Breakages caused by such packages are
hard to debug and pinpoint the cause. In a monorepo, it is very important to
ensure that all packages are on the same versions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-how-do-i-align-all-apps-on-the-same-set-of-packages-and-versions">3. How do I align all apps on the same set of packages and versions?<a href="#3-how-do-i-align-all-apps-on-the-same-set-of-packages-and-versions" class="hash-link" aria-label="Direct link to 3. How do I align all apps on the same set of packages and versions?" title="Direct link to 3. How do I align all apps on the same set of packages and versions?">​</a></h3>
<p>When integrating multiple experiences into an existing app, it can sometimes be
difficult to determine the dependencies that need to be installed. For example,
given two experiences with dependencies as below:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">{</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;name&quot;: &quot;experience-A&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native&quot;: &quot;^0.63 || ^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native-netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">{</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;name&quot;: &quot;experience-B&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native-netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example, it&#x27;s not so hard to see that the integrating app should be
using <code>react-native</code> 0.63 and <code>react-native-netinfo</code> 6.0.0. However, imagine
that there are multiple experiences and many more dependencies. It&#x27;s not hard to
see that it can quickly become very messy to go through all of them and make
sure that the app&#x27;s <code>package.json</code> satisfies all of them, and without causing
any conflicts. And you&#x27;ll have to do this every time one or more packages get
updated. Not all experiences will be declaring their dependencies correctly,
e.g. putting <code>react-native-netinfo</code> under <code>dependencies</code> and causing multiple
versions of <code>react-native-netinfo</code> to be bundled. When it is time to update
React Native to the latest version, can you do that and still be confident that
all your modules will still work?</p>
<p><code>@rnx-kit/dep-check</code> works by reading a configuration, and suggests changes that
need to be made. It can optionally also write said changes to the
<code>package.json</code>. The configuration must be manually written by the package owner.
It declares which React Native versions the package supports, and which
capabilities it requires. For instance, lets say we have a library,
<code>awesome-library</code>, which supports React Native versions 0.63 and 0.64, and needs
something that provides network information. We would declare the following in
our <code>package.json</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">package.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">{</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;name&quot;: &quot;awesome-library&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;reactNativeVersion&quot;: &quot;^0.63 || ^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;capabilities&quot;: [</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-android&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-ios&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;netinfo&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we run <code>@rnx-kit/dep-check</code> now, it will suggest that we change
<code>peerDependencies</code> and <code>devDependencies</code> to the following:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">package.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">{</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;name&quot;: &quot;awesome-library&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;@react-native-community/netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native&quot;: &quot;^0.63.2 || ^0.64.1&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;devDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;@react-native-community/netinfo&quot;: &quot;^5.7.1&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native&quot;: &quot;^0.63.2&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;reactNativeVersion&quot;: &quot;^0.63 || ^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;capabilities&quot;: [</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-android&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-ios&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;netinfo&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now our <code>package.json</code> correctly declares that it supports React Native 0.63 and
0.64 to consumers. It also added <code>@react-native-community/netinfo</code>, a package
that provides network information. At the same time, it also sets the versions
we&#x27;ll need during development.</p>
<p>For apps that use <code>@rnx-kit/dep-check</code>, the process is similar but you&#x27;ll also
need to declare that the package is an app by adding <code>&quot;kitType&quot;: &quot;app&quot;</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockTitle_Ktv7">package.json</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">{</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;name&quot;: &quot;awesome-app&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;@react-native-community/netinfo&quot;: &quot;^6.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;awesome-library&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;react-native&quot;: &quot;^0.64.1&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;reactNativeVersion&quot;: &quot;^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;kitType&quot;: &quot;app&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    &quot;capabilities&quot;: [</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-android&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      &quot;core-ios&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now, we see that <code>@rnx-kit/dep-check</code> added <code>@react-native-community/netinfo</code>
even though it wasn&#x27;t declared in capabilities. This is because when a package
is an app, it needs to fulfill the requirements of its dependencies. In this
example, because <code>awesome-library</code> needs the <code>netinfo</code> capability, it gets added
to <code>awesome-app</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design">Design<a href="#design" class="hash-link" aria-label="Direct link to Design" title="Direct link to Design">​</a></h2>
<p><code>dep-check</code> attempts to solve these issues by aligning users on a centralized
repository of dependencies. Initially, the repository will be seeded with
popular packages, but the goal for it is to become crowd-sourced so that we all
can benefit from the latest fixes and features without all having to be
up-to-date on everything that goes within the React Native community.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="capabilities">Capabilities<a href="#capabilities" class="hash-link" aria-label="Direct link to Capabilities" title="Direct link to Capabilities">​</a></h3>
<p>Modules usually provide one or more features. For instance,
<code>@react-native-async-storage/async-storage</code> provides a simple key-value storage,
<code>react-native-webview</code> provides a web view component, and so on. Knowing which
modules are providing the desired features can be tricky. With <code>dep-check</code>, we
propose the use of generic names, or capabilities as we call them, that map
directly to a package:</p>
<table><thead><tr><th style="text-align:left">Capability</th><th style="text-align:left">Description</th><th style="text-align:left">Package</th></tr></thead><tbody><tr><td style="text-align:left">netinfo</td><td style="text-align:left">Device network information</td><td style="text-align:left">@react-native-community/netinfo</td></tr><tr><td style="text-align:left">storage</td><td style="text-align:left">Key-value storage</td><td style="text-align:left">@react-native-async-storage/async-storage</td></tr><tr><td style="text-align:left">webview</td><td style="text-align:left">WebView component</td><td style="text-align:left">react-native-webview</td></tr></tbody></table>
<p><code>dep-check</code> also defines a set of <strong>core</strong> capabilities. These are capabilities
that provide platform support, and are currently defined in the below table:</p>
<table><thead><tr><th style="text-align:left">Capability</th><th style="text-align:left">Platform</th><th style="text-align:left">Package</th></tr></thead><tbody><tr><td style="text-align:left">core-android</td><td style="text-align:left">Android</td><td style="text-align:left">react-native</td></tr><tr><td style="text-align:left">core-ios</td><td style="text-align:left">iOS</td><td style="text-align:left">react-native</td></tr><tr><td style="text-align:left">core-macos</td><td style="text-align:left">macOS</td><td style="text-align:left">react-native-macos</td></tr><tr><td style="text-align:left">core-windows</td><td style="text-align:left">Windows</td><td style="text-align:left">react-native-windows</td></tr></tbody></table>
<p>With generic names, we are more resilient against module renames since we can
recommend the old name in one version, and the new name in the next. We could
even provide a fork with security fixes or backwards compatibility shims for
long term support. We will see how this can be achieved with profiles in the
next section.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="profiles">Profiles<a href="#profiles" class="hash-link" aria-label="Direct link to Profiles" title="Direct link to Profiles">​</a></h3>
<p>We cannot force everyone to be on the latest version of <code>react-native</code>.
Sometimes it&#x27;s not desirable, e.g. due to bugs, or feasible due to constraints
or lack of expertise. What we can do, however, is to try lessen the pain of
supporting multiple versions of <code>react-native</code> and community modules. To that
end, <code>dep-check</code> introduces the concept of profiles. A profile is a single set
of all capability to package@version mappings, usually tied to a single version
of <code>react-native</code>. For instance, the following table is a partial profile for
<code>react-native</code> 0.63
(<a href="https://github.com/microsoft/rnx-kit/blob/769e9fa290929effd5111884f1637c21326b5a95/packages/dep-check/src/profiles/profile-0.63.ts#L9" target="_blank" rel="noopener noreferrer">full listing here</a>):</p>
<table><thead><tr><th style="text-align:left">Capability</th><th style="text-align:left">Package</th></tr></thead><tbody><tr><td style="text-align:left">core-android</td><td style="text-align:left">react-native@^0.63.2</td></tr><tr><td style="text-align:left">core-ios</td><td style="text-align:left">react-native@^0.63.2</td></tr><tr><td style="text-align:left">core-macos</td><td style="text-align:left">react-native-macos@^0.63.0</td></tr><tr><td style="text-align:left">core-windows</td><td style="text-align:left">react-native-windows@^0.63.0</td></tr><tr><td style="text-align:left">netinfo</td><td style="text-align:left">@react-native-community/netinfo@^5.7.1</td></tr><tr><td style="text-align:left">react</td><td style="text-align:left">react@16.13.1</td></tr><tr><td style="text-align:left">storage</td><td style="text-align:left">@react-native-community/async-storage@^1.12.1</td></tr><tr><td style="text-align:left">webview</td><td style="text-align:left">react-native-webview@^11.4.2</td></tr></tbody></table>
<p>Here&#x27;s the partial profile for react-native 0.64
(<a href="https://github.com/microsoft/rnx-kit/blob/769e9fa290929effd5111884f1637c21326b5a95/packages/dep-check/src/profiles/profile-0.64.ts#L8" target="_blank" rel="noopener noreferrer">full listing here</a>):</p>
<table><thead><tr><th style="text-align:left">Capability</th><th style="text-align:left">Package</th></tr></thead><tbody><tr><td style="text-align:left">core-android</td><td style="text-align:left">react-native@^0.64.2</td></tr><tr><td style="text-align:left">core-ios</td><td style="text-align:left">react-native@^0.64.2</td></tr><tr><td style="text-align:left">core-macos</td><td style="text-align:left">react-native-macos@^0.64.0</td></tr><tr><td style="text-align:left">core-windows</td><td style="text-align:left">react-native-windows@^0.64.0</td></tr><tr><td style="text-align:left">netinfo</td><td style="text-align:left">@react-native-community/netinfo@^6.0.0</td></tr><tr><td style="text-align:left">react</td><td style="text-align:left">react@17.0.1</td></tr><tr><td style="text-align:left">storage</td><td style="text-align:left">@react-native-async-storage/async-storage@^1.15.3</td></tr><tr><td style="text-align:left">webview</td><td style="text-align:left">react-native-webview@^11.4.2</td></tr></tbody></table>
<p>A package declares what capabilities it requires, which versions of
<code>react-native</code> it supports, and <code>dep-check</code> will populate the package&#x27;s
<code>package.json</code> with the modules and versions that it should use. For instance,
if a package that supports <code>react-native</code> 0.63 requires <code>core-ios</code>, <code>netinfo</code>,
and <code>react</code>, <code>dep-check</code> will add <code>react-native@^0.63.2</code>,
<code>@react-native-community/netinfo@^5.7.1</code>, and <code>react@16.13.1</code>.</p>
<p>When the package is migrated from one profile version to the next, the author
should be prompted to bump a few packages. For instance, besides bumping
<code>react-native</code>, they also should bump <code>react</code> to 17.0.1, and
<code>@react-native-community/netinfo</code> to ^6.0.0. We also note that
<code>@react-native-community/async-storage</code> was renamed to
<code>@react-native-async-storage/async-storage</code>. While users are on older profiles,
they should be warned of upcoming, potentially breaking changes so they can be
prepared.</p>
<p>Besides package renames, we can also recommend alternative modules that provide
the same capability, or forks that include security fixes or shims for backwards
compatibility where long term support is a concern.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="putting-it-all-together">Putting it all together<a href="#putting-it-all-together" class="hash-link" aria-label="Direct link to Putting it all together" title="Direct link to Putting it all together">​</a></h3>
<p>Now that we know the basic concepts, let&#x27;s take a look at how it works. We&#x27;ll
start with configuring the examples from earlier. <code>experience-A</code> depends on
<code>react-native</code> and <code>react-native-netinfo</code>. According to our list of
capabilities, they correspond to <code>core-android</code>/<code>core-ios</code> and <code>netinfo</code>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;experience-A&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63 || ^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native-netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;reactNativeVersion&quot;: &quot;^0.63 || ^0.64&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;, &quot;netinfo&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Likewise for <code>experience-B</code>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;experience-B&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native-netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;reactNativeVersion&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;, &quot;netinfo&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we run <code>dep-check</code> now, it will complain because <code>experience-B</code> only needs to
support <code>react-native-netinfo</code>@^5.7.1:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;experience-B&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">-    &quot;react-native-netinfo&quot;: &quot;^5.7.1 || ^6.0.0&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;react-native-netinfo&quot;: &quot;^5.7.1&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;reactNativeVersion&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;, &quot;netinfo&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We try to avoid breaking changes (major version bumps) within a single profile
version. That&#x27;s why <code>dep-check</code> will recommend 5.x only for <code>react-native</code> 0.63.</p>
<p>If we add <code>webview</code> to capabilities now, <code>dep-check</code> will ask you to add
<code>react-native-webview</code>:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;experience-B&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;peerDependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native-netinfo&quot;: &quot;^5.7.1&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;react-native-webview&quot;: &quot;^11.4.2&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;reactNativeVersion&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;, &quot;netinfo&quot;, &quot;webview&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The user need not know what package to use, only the desired feature.</p>
<p>Let&#x27;s move on to configuring our app:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;app&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;experience-A&quot;: &quot;^1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;experience-B&quot;: &quot;^1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63.2&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;reactNativeVersion&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;kitType&quot;: &quot;app&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+  }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The first thing you should note here is that we need to declare that this is an
app by setting <code>&quot;kitType&quot;: &quot;app&quot;</code>. This will tell <code>dep-check</code> to also scan
dependencies. By default, this is set to <code>library</code>.</p>
<p>Running <code>dep-check</code> now, the first thing it does is to scan through all your
dependencies and gather all required capabilities. <code>dep-check</code> will then resolve
all capabilities, and finally make sure the <code>dependencies</code> section in
<code>package.json</code> contains all the needed packages and at the correct versions. In
our example, our list of capabilities will contain <code>[&quot;netinfo&quot;, &quot;webview&quot;]</code>.
<code>dep-check</code> sees that there are missing dependencies in your <code>package.json</code> and
will output an error message telling you to add them:</p>
<div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;name&quot;: &quot;app&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;version&quot;: &quot;1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;dependencies&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;experience-A&quot;: &quot;^1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;experience-B&quot;: &quot;^1.0.0&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;react-native&quot;: &quot;^0.63.2&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;react-native-netinfo&quot;: &quot;^5.7.1&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">+    &quot;react-native-webview&quot;: &quot;^11.4.2&quot;</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   },</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   &quot;rnx-kit&quot;: {</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;reactNativeVersion&quot;: &quot;^0.63&quot;,</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">     &quot;capabilities&quot;: [&quot;core-android&quot;, &quot;core-ios&quot;]</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">   }</span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Re-running the command with <code>--write</code> will let <code>dep-check</code> add them for you.</p>
<p><code>dep-check</code> makes sure that your declared dependencies always matches your list
of capabilities. It will make sure that your dependencies are declare in the
right sections, i.e. under <code>dependencies</code> if you&#x27;re an app, and under
<code>peerDependencies</code> if you&#x27;re a library. It will also report partial ones,
meaning it will catch scenarios such as when you declare support for 0.63 and
0.64, but are missing <code>react-native-netinfo</code>@^6.0.0.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="zero-config">Zero-config<a href="#zero-config" class="hash-link" aria-label="Direct link to Zero-config" title="Direct link to Zero-config">​</a></h3>
<p><code>dep-check</code> is currently opt-in. Packages need to have a configuration that
<code>dep-check</code> can run against. However, there is still a need to align packages
across repositories without having to configure all packages. <code>dep-check</code> should
still be useful without a configuration.</p>
<ul>
<li><code>--init</code> — When configuring a package, it can be cumbersome to know what
packages map to what capabilities. <code>--init</code> is a best-effort command that
scans all your dependencies and adds a configuration with all the capabilities
it thinks are required. You&#x27;ll likely have to clean up the list, but at least
you won&#x27;t have to start from scratch.</li>
<li><code>--vigilant</code> — Without configuring any packages, you can still benefit from
<code>dep-check</code> with <code>--vigilant</code>. This mode will scan all dependencies and make
sure that their dependencies align with the specified profiles. For instance,
<code>--vigilant 0.63,0.64</code> will compare dependencies against all known modules in
profile version 0.63 and 0.64.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In <code>align-deps</code>, we&#x27;ve changed the configuration schema to make it more generic
and not tied to a specific dependency (i.e. <code>react-native</code>). The <code>--vigilant</code>
flag had to be replaced as well. The equivalent of <code>--vigilant 0.63,0.64</code> in the
new schema is <code>--requirements &#x27;react-native@0.63 || 0.64&#x27;</code>.</p><p>You can read more about the changes in this RFC:
<a href="https://github.com/microsoft/rnx-kit/blob/rfcs/text/0001-dep-check-v2.md" target="_blank" rel="noopener noreferrer"><code>dep-check</code> v2</a></p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extensions">Extensions<a href="#extensions" class="hash-link" aria-label="Direct link to Extensions" title="Direct link to Extensions">​</a></h3>
<p>The list of capabilities may be limited for some usage scenarios. <code>dep-check</code>
therefore also allows users to specify additional profiles via configuration,
<code>customProfiles</code>, or the equivalent flag, <code>--custom-profiles</code>. The value can be
a path to a <code>.js</code>, <code>.json</code>, or module name, e.g.
<code>my-custom-capability-resolver</code>, and must default export an object containing
profiles keyed by its version number. Example:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:rgb(28, 30, 33);--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:rgb(28, 30, 33);background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">module</span><span class="token punctuation" style="color:rgb(4, 81, 165)">.</span><span class="token plain">exports </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  </span><span class="token string-property property">&quot;0.63&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    </span><span class="token string-property property">&quot;my-capability&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      name</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      version</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;1.0.0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  </span><span class="token string-property property">&quot;0.64&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    </span><span class="token string-property property">&quot;my-capability&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      name</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;my-module&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">      version</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;1.1.0&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:rgb(28, 30, 33)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The profiles are appended to the default ones and may override capabilities.
This format is explicitly chosen to be compatible with <code>--vigilant</code>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In <code>align-deps</code>, we&#x27;ve deprecated <code>customProfiles</code> in favour of <code>presets</code>. A
preset is just a collection of profiles like in the example above. This new
property allows you to specify multiple presets and/or replace the built-in
<code>react-native</code> preset. The command line flag, <code>--custom-profiles</code>, was replaced
with <code>--presets</code>.</p><p>You can read more about the changes in this RFC:
<a href="https://github.com/microsoft/rnx-kit/blob/rfcs/text/0001-dep-check-v2.md" target="_blank" rel="noopener noreferrer"><code>dep-check</code> v2</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives">Alternatives<a href="#alternatives" class="hash-link" aria-label="Direct link to Alternatives" title="Direct link to Alternatives">​</a></h2>
<ul>
<li><code>peerDependencies</code> — What&#x27;s the difference between <code>dep-check</code> and just using
the <code>peerDependencies</code> field in <code>package.json</code>?<!-- -->
<ul>
<li>JS package managers are inconsistent when it comes to installing peer
dependencies. npm has been
<a href="https://blog.npmjs.org/post/110924823920/npm-weekly-5.html" target="_blank" rel="noopener noreferrer">back</a> and
<a href="https://github.blog/2021-02-02-npm-7-is-now-generally-available/#peer-dependencies" target="_blank" rel="noopener noreferrer">forth</a>
on this. Yarn only emits warnings when they are unsatisfied. The only sure
way to get them installed is ensure that the dependencies are added
appropriately. However, people tend to ignore warnings in our experience.</li>
<li>There is no central control over what gets added to <code>peerDependencies</code>. One
package could add <code>react-native-webview</code>@^11.4.2, while another has
<code>react-native-webview</code>@^10.10.2. Or worse, they could be adding them under
<code>dependencies</code> instead, potentially causing two copies to be bundled with
your app.</li>
<li>Similarly, package managers don&#x27;t care whether you&#x27;re using
<code>@react-native-community/netinfo</code> or <code>react-native-netinfo</code>.</li>
</ul>
</li>
<li><a href="https://github.com/JamieMason/syncpack/" target="_blank" rel="noopener noreferrer">syncpack</a> — syncpack is a tool to
manage dependencies within a monorepo. It has some overlap with <code>dep-check</code>
but doesn&#x27;t cover everything we need. In particular:<!-- -->
<ul>
<li>It doesn&#x27;t have a central repository of dependencies, so it cannot align
multiple repositories on the same packages and versions for the same set of
capabilities.</li>
<li>From a cursory glance, it doesn&#x27;t allow packages to support multiple
versions of react-native.</li>
<li>It supports version groups, which may be useful for some usage scenarios,
but are potentially dangerous within react-native repos.</li>
</ul>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/rnx-kit/tree/main/docsite/docs/architecture/dependency-management.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/rnx-kit/docs/architecture/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Architecture Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#terminology" class="table-of-contents__link toc-highlight">Terminology</a></li><li><a href="#motivation" class="table-of-contents__link toc-highlight">Motivation</a><ul><li><a href="#1-which-packages-should-i-use" class="table-of-contents__link toc-highlight">1. Which packages should I use?</a></li><li><a href="#2-how-do-i-align-all-of-my-code-on-the-same-set-of-packages-and-versions" class="table-of-contents__link toc-highlight">2. How do I align all of my code on the same set of packages and versions?</a></li><li><a href="#3-how-do-i-align-all-apps-on-the-same-set-of-packages-and-versions" class="table-of-contents__link toc-highlight">3. How do I align all apps on the same set of packages and versions?</a></li></ul></li><li><a href="#design" class="table-of-contents__link toc-highlight">Design</a><ul><li><a href="#capabilities" class="table-of-contents__link toc-highlight">Capabilities</a></li><li><a href="#profiles" class="table-of-contents__link toc-highlight">Profiles</a></li><li><a href="#putting-it-all-together" class="table-of-contents__link toc-highlight">Putting it all together</a></li><li><a href="#zero-config" class="table-of-contents__link toc-highlight">Zero-config</a></li><li><a href="#extensions" class="table-of-contents__link toc-highlight">Extensions</a></li></ul></li><li><a href="#alternatives" class="table-of-contents__link toc-highlight">Alternatives</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.microsoft.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/rnx-kit/img/msoss-light.png" alt="Microsoft Open Source logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/rnx-kit/img/msoss-dark.png" alt="Microsoft Open Source logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2024 Microsoft</div></div></div></footer></div>
</body>
</html>