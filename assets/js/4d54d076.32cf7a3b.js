"use strict";(self.webpackChunk_rnx_kit_docsite=self.webpackChunk_rnx_kit_docsite||[]).push([[1459],{2199:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"contributing","title":"Contributing","description":"Thank you for your interest in this project! We welcome all contributions and","source":"@site/docs/contributing.md","sourceDirName":".","slug":"/contributing","permalink":"/rnx-kit/docs/contributing","draft":false,"unlisted":false,"editUrl":"https://github.com/microsoft/rnx-kit/tree/main/docsite/docs/contributing.md","tags":[],"version":"current","frontMatter":{}}');var i=s(4848),r=s(8453);const l={},o="Contributing",c={},d=[{value:"Contributor License Agreement",id:"contributor-license-agreement",level:2},{value:"Requirements",id:"requirements",level:2},{value:"Optional",id:"optional",level:3},{value:"Build",id:"build",level:2},{value:"Style Guide",id:"style-guide",level:2},{value:"Adding a New Package",id:"adding-a-new-package",level:2},{value:"Change Logs",id:"change-logs",level:2},{value:"Releases",id:"releases",level:2},{value:"General Maintenance",id:"general-maintenance",level:2},{value:"Direct Dependencies",id:"direct-dependencies",level:3},{value:"Development Dependencies",id:"development-dependencies",level:3},{value:"Android Dependencies",id:"android-dependencies",level:3}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"contributing",children:"Contributing"})}),"\n",(0,i.jsx)(n.p,{children:"Thank you for your interest in this project! We welcome all contributions and\nsuggestions!"}),"\n",(0,i.jsxs)(n.p,{children:["You can ",(0,i.jsx)(n.a,{href:"https://github.com/microsoft/rnx-kit/issues/new/choose",children:"open a new issue"})," to report a bug, share an idea, or request a\nfeature. If you're more hands-on, you can ",(0,i.jsx)(n.a,{href:"https://github.com/microsoft/rnx-kit/pulls",children:"submit a pull request"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["As a contributor, you're expected to follow the ",(0,i.jsx)(n.a,{href:"https://github.com/microsoft/rnx-kit/blob/main/CODE_OF_CONDUCT.md",children:"code of conduct"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"contributor-license-agreement",children:"Contributor License Agreement"}),"\n",(0,i.jsxs)(n.p,{children:["Most contributions require you to agree to a Contributor License Agreement (CLA)\ndeclaring that you have the right to, and actually do, grant us the rights to\nuse your contribution. For details, visit ",(0,i.jsx)(n.a,{href:"https://cla.opensource.microsoft.com",children:"https://cla.opensource.microsoft.com"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"When you submit a pull request, a CLA bot will automatically determine whether\nyou need to provide a CLA and decorate the PR appropriately (e.g., status check,\ncomment). Simply follow the instructions provided by the bot. You will only need\nto do this once across all repos using our CLA."}),"\n",(0,i.jsx)(n.h2,{id:"requirements",children:"Requirements"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Node LTS (see ",(0,i.jsx)(n.a,{href:"https://nodejs.org/en/about/releases/",children:"releases"})," for specific\nversions)"]}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://classic.yarnpkg.com/",children:"Yarn Classic"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"optional",children:"Optional"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Android"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://developer.android.com/studio",children:"Android Studio"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Android SDK Platform 34"}),"\n",(0,i.jsx)(n.li,{children:"Android SDK Build-Tools 33.0.1"}),"\n",(0,i.jsxs)(n.li,{children:["To install the required SDKs, go into ",(0,i.jsx)(n.strong,{children:"Preferences"})," \u276d ",(0,i.jsx)(n.strong,{children:"Appearance &\nBehavior"})," \u276d ",(0,i.jsx)(n.strong,{children:"System Settings"})," \u276d ",(0,i.jsx)(n.strong,{children:"Android SDK"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"iOS/macOS"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://apps.apple.com/app/xcode/id497799835",children:"Xcode"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://cocoapods.org/",children:"CocoaPods"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Windows"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Ensure that ",(0,i.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/windows/uwp/get-started/enable-your-device-for-development",children:"Developer Mode"})," is turned on in Windows Settings app"]}),"\n",(0,i.jsxs)(n.li,{children:["Install development dependencies as described in the ",(0,i.jsx)(n.a,{href:"https://microsoft.github.io/react-native-windows/docs/rnw-dependencies",children:"React Native for\nWindows documentation"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,i.jsx)(n.p,{children:"We use Yarn to install npm dependencies. From the repo root, run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"yarn\n"})}),"\n",(0,i.jsx)(n.p,{children:"Once it's done, you can choose to build all packages or just the packages you're\ninterested in."}),"\n",(0,i.jsx)(n.p,{children:"If you want to build all packages, run the following command at the root:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"yarn build\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Otherwise, you can specify which package to build, e.g. ",(0,i.jsx)(n.code,{children:"@rnx-kit/cli"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"yarn build-scope @rnx-kit/cli\n"})}),"\n",(0,i.jsx)(n.p,{children:"Alternatively, you can navigate to the package folder and run:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"cd packages/cli\nyarn build --dependencies\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Both the repository level ",(0,i.jsx)(n.code,{children:"build-scope"})," and the package local\n",(0,i.jsx)(n.code,{children:"build --dependencies"})," ensure all dependencies are built before the target\npackage."]}),"\n",(0,i.jsx)(n.p,{children:"Below is a table of commonly used commands and what they do depending on your\ncurrent working directory."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Command"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Repository Level"}),(0,i.jsx)(n.th,{style:{textAlign:"left"},children:"Package Level"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn build"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Builds ",(0,i.jsx)(n.strong,{children:"all"})," packages in the repository"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Builds the ",(0,i.jsx)(n.strong,{children:"current"})," package only"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn build --dependencies"})}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"--"}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Builds the ",(0,i.jsx)(n.strong,{children:"current"})," package and its dependencies"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn build-scope"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Builds the ",(0,i.jsx)(n.strong,{children:"specified"})," package and its dependencies"]}),(0,i.jsx)(n.td,{style:{textAlign:"left"},children:"--"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn format"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Formats ",(0,i.jsx)(n.strong,{children:"all"})," packages in the repository"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Formats the ",(0,i.jsx)(n.strong,{children:"current"})," package only"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn lint"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Lints ",(0,i.jsx)(n.strong,{children:"all"})," packages in the repository"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Lints the ",(0,i.jsx)(n.strong,{children:"current"})," package only"]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{style:{textAlign:"left"},children:(0,i.jsx)(n.code,{children:"yarn test"})}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Tests ",(0,i.jsx)(n.strong,{children:"all"})," packages in the repository"]}),(0,i.jsxs)(n.td,{style:{textAlign:"left"},children:["Tests the ",(0,i.jsx)(n.strong,{children:"current"})," package only"]})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"style-guide",children:"Style Guide"}),"\n",(0,i.jsxs)(n.p,{children:["Most files are formatted with ",(0,i.jsx)(n.a,{href:"https://prettier.io",children:"Prettier"}),". We also use ",(0,i.jsx)(n.a,{href:"https://eslint.org",children:"ESLint"})," to lint all\nJavaScript code."]}),"\n",(0,i.jsxs)(n.p,{children:["You can trigger formatting by running ",(0,i.jsx)(n.code,{children:"yarn format"}),", and linting with\n",(0,i.jsx)(n.code,{children:"yarn lint"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"adding-a-new-package",children:"Adding a New Package"}),"\n",(0,i.jsx)(n.p,{children:"To ensure that there is consistency and shared practices across the monorepo, we\nhave introduced a small script to easily allow for new packages generation."}),"\n",(0,i.jsx)(n.p,{children:"Simply run"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"yarn new-package <package-name>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["To generate a sample project for you to use; this is based on\n",(0,i.jsx)(n.code,{children:"packages/template"}),". You can pass the extra flag ",(0,i.jsx)(n.code,{children:"--experimental"})," to send the\npackage in the ",(0,i.jsx)(n.code,{children:"incubator"})," folder \u2014 files will be tweaked as necessary."]}),"\n",(0,i.jsx)(n.h2,{id:"change-logs",children:"Change Logs"}),"\n",(0,i.jsx)(n.p,{children:"Each package in this monorepo contains a change log. The log is built from\nchange descriptions submitted with each PR."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-sh",children:"yarn change\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This launches ",(0,i.jsx)(n.a,{href:"https://github.com/atlassian/changesets#readme",children:"Changesets"}),", which collects and records information about your\nchange."]}),"\n",(0,i.jsxs)(n.p,{children:["Follow the prompts and describe the changes you are making to each package. This\ninformation is written in files under ",(0,i.jsx)(n.code,{children:"/.changeset"}),". Our CI loop uses these\nfiles to bump package versions and update package change logs."]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"[!NOTE]"}),"\n",(0,i.jsx)(n.p,{children:"You only need one change log entry per feature/fix. You don't need to create\nnew entries if you're addressing PR feedback."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"releases",children:"Releases"}),"\n",(0,i.jsxs)(n.p,{children:["Our release process is fully automated by ",(0,i.jsx)(n.a,{href:"https://github.com/atlassian/changesets#readme",children:"Changesets"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"When a PR is merged, our CI loop uses Changesets to version-bump each changed\npackage and publish it to npm."}),"\n",(0,i.jsx)(n.h2,{id:"general-maintenance",children:"General Maintenance"}),"\n",(0,i.jsxs)(n.p,{children:["We use ",(0,i.jsx)(n.a,{href:"https://docs.renovatebot.com",children:"Renovate"})," to keep dependencies up to date. They are currently\nscheduled to run ",(0,i.jsx)(n.a,{href:"https://github.com/microsoft/rnx-kit/blob/main/.github/renovate.json",children:"every Monday morning"}),". You can also manually trigger updates\nvia the ",(0,i.jsx)(n.a,{href:"https://github.com/microsoft/rnx-kit/issues/1680",children:"Dependency Dashboard"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"direct-dependencies",children:"Direct Dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Patch bumps:"})," As long as the CI is green, these should be good to merge\nwithout having to touch ",(0,i.jsx)(n.code,{children:"package.json"}),". The only thing to watch out for is\nwhether duplicates are introduced in ",(0,i.jsx)(n.code,{children:"yarn.lock"}),":","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Sometimes, running ",(0,i.jsx)(n.code,{children:"yarn dedupe"})," is enough to get rid of duplicates."]}),"\n",(0,i.jsx)(n.li,{children:"Other times, we have to look at the dependency chain and dedupe by bumping\none of the dependees."}),"\n",(0,i.jsxs)(n.li,{children:["As a last resort, and only if one of the dependees are using an\nunnecessarily strict version range, we can add a ",(0,i.jsx)(n.code,{children:"resolutions"})," entry in\n",(0,i.jsx)(n.code,{children:"package.json"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Minor bumps:"})," Semantically, minor bumps should only include additions and\nnot break anything. Check the change log to be sure. Otherwise, see the notes\non patch bumps."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Major bumps:"})," In general, we only do major bumps manually. This is to\nensure that we aren't unnecessarily adding more dependencies on the consumer\nside or make things more complicated to maintain. An example of us holding\nback is ",(0,i.jsx)(n.a,{href:"https://github.com/chalk/chalk#readme",children:(0,i.jsx)(n.code,{children:"chalk"})}),"; we are stuck on 4.x until ",(0,i.jsx)(n.code,{children:"@react-native-community/cli"}),"\nmigrates to ESM."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"development-dependencies",children:"Development Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Consumers never see these so we can be less conservative, especially when it\ncomes to major bumps. Otherwise, everything mentioned above still applies."}),"\n",(0,i.jsx)(n.h3,{id:"android-dependencies",children:"Android Dependencies"}),"\n",(0,i.jsx)(n.p,{children:"Always check the change log for potentially breaking changes as they typically\ndo not follow semantic versioning. In particular, be on the lookout for changes\nto:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Minimum target version"}),"\n",(0,i.jsx)(n.li,{children:"Android SDK version"}),"\n",(0,i.jsx)(n.li,{children:"Kotlin version"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If the bump contains potentially breaking changes, consider whether we need to\ngate them behind a version check. For example, we only use\n",(0,i.jsx)(n.code,{children:"androidx.activity:activity-ktx:1.17.2"})," when on Kotlin 1.8 or higher\n(",(0,i.jsxs)(n.a,{href:"https://github.com/microsoft/rnx-kit/blob/%40rnx-kit/react-native-test-app-msal%402.1.7/incubator/react-native-test-app-msal/android/build.gradle#L173",children:["see ",(0,i.jsx)(n.code,{children:"build.gradle"})]}),")."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>o});var t=s(6540);const i={},r=t.createContext(i);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);